\doxysection{/home/amano/\+Simple\+Rest/\+Program.cs}
\hypertarget{Program_8cs_source}{}\label{Program_8cs_source}\mbox{\hyperlink{Program_8cs}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00001}00001\ \textcolor{keyword}{using\ }System.Net;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00002}00002\ \textcolor{keyword}{using\ }System.Security.Cryptography;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00003}00003\ \textcolor{keyword}{using\ }System.Text;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00004}00004\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceSimpleRest}{SimpleRest}};}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00006}00006\ \textcolor{keyword}{using\ }System.Collections.Specialized;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00007}00007\ \textcolor{keyword}{using\ }System.Diagnostics;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00008}00008\ \textcolor{keyword}{using\ }System.Text.Unicode;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00009}00009\ \textcolor{keyword}{using\ }System.Web;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00010}00010\ \textcolor{keyword}{using\ }Dumpify;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00011}00011\ \textcolor{keyword}{using\ }Newtonsoft.Json;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00012}00012\ \textcolor{keyword}{using\ }Spectre.Console;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00013}00013\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00014}\mbox{\hyperlink{classSimpleRest_1_1Program}{00014}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classSimpleRest_1_1Program}{Program}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00015}00015\ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00016}00016\ \ \ \ \ \textcolor{keyword}{static}\ Task\ Main(\textcolor{keywordtype}{string}[]\ args)}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00017}00017\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00018}00018\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi}{SimpleRestApi}}\ api\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi}{SimpleRestApi}}(3000,\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestLogger}{SimpleRestLogger}}(logLevel:\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}.DEBUG));}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00019}00019\ \ \ \ \ \ \ \ \ await\ api.\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a5b7974e06c30ac1d4174447ed728f09b}{Start}}((\textcolor{keywordtype}{int}\ port)\ =>}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00020}00020\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00021}00021\ \ \ \ \ \ \ \ \ \ \ \ \ Console.WriteLine(\textcolor{stringliteral}{"{}Server\ started\ on\ port\ "{}}\ +\ port);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00022}00022\ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00023}00023\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00024}00024\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00025}\mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestLogger}{00025}}\ \textcolor{keyword}{interface\ }\mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestLogger}{ISimpleRestLogger}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00026}00026\ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00027}\mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestLogger_af81955907f4dbc014ebb3125b04577eb}{00027}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestLogger_af81955907f4dbc014ebb3125b04577eb}{Log}}(\textcolor{keywordtype}{string}\ customMessage,\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}?\ logLevel\ =\ \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00028}\mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestLogger_a0e7936e67a658531b2034c867f0123cb}{00028}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestLogger_a0e7936e67a658531b2034c867f0123cb}{Log}}(\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest}{SimpleRestRequest}}\ request,\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}?\ logLevel\ =\ \textcolor{keyword}{null});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00029}00029\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00030}\mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{00030}}\ \textcolor{keyword}{public}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00031}00031\ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00032}00032\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8ab50339a10e1de285ac99d4c3990b8693}{NONE}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00033}00033\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8a41bc94cbd8eebea13ce0491b2ac11b88}{LOW}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00034}00034\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8ac87f3be66ffc3c0d4249f1c2cc5f3cce}{MEDIUM}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00035}00035\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8ab89de3b4b81c4facfac906edf29aec8c}{HIGH}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00036}00036\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8ac1fabfea54ec6011e694f211f3ffebf3}{LONG}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00037}00037\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8adc30ec20708ef7b0f641ef78b7880a15}{DEBUG}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00038}00038\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00039}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestLogger}{00039}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classSimpleRest_1_1SimpleRestLogger}{SimpleRestLogger}}\ :\ \mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestLogger}{ISimpleRestLogger}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00040}00040\ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00041}00041\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}\ m\_LogLevel;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00042}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestLogger_ae6cf3b1b3d50be629d089183c9bc52f5}{00042}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestLogger_ae6cf3b1b3d50be629d089183c9bc52f5}{SimpleRestLogger}}(\mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}\ logLevel\ =\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}.NONE)}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00043}00043\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00044}00044\ \ \ \ \ \ \ \ \ m\_LogLevel\ =\ logLevel;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00046}00046\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00047}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestLogger_a8d146df05696ca8e03fdacd0916fa408}{00047}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestLogger_a8d146df05696ca8e03fdacd0916fa408}{Log}}(\textcolor{keywordtype}{string}\ customMessage,\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}?\ loglevel\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00048}00048\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00049}00049\ \ \ \ \ \ \ \ \ Console.WriteLine(\$\textcolor{stringliteral}{"{}[\{DateTime.Now.ToShortDateString()\}]\ \{customMessage\}"{}});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00050}00050\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00052}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestLogger_aead1df9ca932966a46e45e7251268777}{00052}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestLogger_aead1df9ca932966a46e45e7251268777}{Log}}(\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest}{SimpleRestRequest}}\ request,\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}?\ loglevel\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00053}00053\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00054}00054\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}\ level\ =\ ??=\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}.DEBUG;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00055}00055\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00056}00056\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (level)}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00057}00057\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00058}00058\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}.LOW:}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00059}00059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Console.WriteLine(\$\textcolor{stringliteral}{"{}\{request.Method.ToString()\}:\ \{request.Endpoint\}"{}});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00060}00060\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}.MEDIUM:}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00063}00063\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Console.WriteLine(\$\textcolor{stringliteral}{"{}[\{DateTime.Now.ToShortDateString()\}]\ \{request.Method.ToString()\}:\ \{request.Endpoint\}"{}});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00064}00064\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}.HIGH:}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00066}00066\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Console.WriteLine(\$\textcolor{stringliteral}{"{}[\{DateTime.Now.ToShortDateString()\}]\ \{request.Method.ToString()\}:\ \{request.Endpoint\}\{(request.Query?.Count\ >\ 0\ ?\ "{}}?\textcolor{stringliteral}{"{}\ +\ string.Join("{}}\&\textcolor{stringliteral}{"{},\ request.Query.Select(kvp\ =>\ kvp.Key\ +\ "{}}=\textcolor{stringliteral}{"{}\ +\ kvp.Value))\ :\ string.Empty)\}"{}});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00067}00067\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00068}00068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}.LONG:}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00069}00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Console.WriteLine(\$\textcolor{stringliteral}{"{}[\{DateTime.Now.ToLongDateString()\}]\ \{request.Method.ToString()\}:\ \{request.Endpoint\}\{(request.Query?.Count\ >\ 0\ ?\ "{}}?\textcolor{stringliteral}{"{}\ +\ string.Join("{}}\&\textcolor{stringliteral}{"{},\ request.Query.Select(kvp\ =>\ kvp.Key\ +\ "{}}=\textcolor{stringliteral}{"{}\ +\ kvp.Value))\ :\ string.Empty)\}"{}});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00070}00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00071}00071\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00072}00072\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ \mbox{\hyperlink{namespaceSimpleRest_abcfe21c0c750d079779198565879d1c8}{SimpleRestLogLevel}}.DEBUG:}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00073}00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Console.WriteLine(\textcolor{stringliteral}{\$@"{}[\{DateTime.Now.ToLongDateString()\}]\ \{request.Method.ToString()\}:\ \{request.Endpoint\}\{'\(\backslash\)n'\}Query:\{'\(\backslash\)n'\}\{request.Query.DumpText(}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00074}00074\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ typeNames:\ new\ TypeNamingConfig\ \{\ ShowTypeNames\ =\ false\ \},}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00075}00075\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tableConfig:\ new\ TableConfig}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00076}00076\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00077}00077\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ShowTableHeaders\ =\ false,}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00078}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi}{00078}}\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \},}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00079}00079\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ members:\ new\ MembersConfig\ \{\ IncludeFields\ =\ true\ \}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00080}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_afcd00c55c6e414b086cd86ac1d5eb299}{00080}}\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00081}00081\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00082}00082\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00083}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a4ce99a6afd7423da41524e7ba9750c63}{00083}}\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00084}00084\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ )\}"{}});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00086}00086\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00087}00087\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00088}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a2d9c9e5a04fd9cfce4d1e26bc57ff77e}{00088}}\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00089}00089\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi}{SimpleRestApi}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00090}00090\ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00091}00091\ \ \ \ \ \textcolor{keyword}{public}\ delegate\ \textcolor{keywordtype}{object}?\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_afcd00c55c6e414b086cd86ac1d5eb299}{ApiMiddleWare}}(\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest}{SimpleRestRequest}}\ request,\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse}{SimpleRestResponse}}\ response);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00092}00092\ \ \ \ \ \textcolor{comment}{//\ public\ delegate\ void\ ApiMiddleWareNext();}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00093}00093\ \ \ \ \ \textcolor{comment}{//\ public\ delegate\ void\ ApiMiddleWareWithNext(ApiCallback\ callback,\ ApiMiddleWareNext\ next);}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00094}00094\ \ \ \ \ \textcolor{keyword}{public}\ Dictionary<string,\ List<ApiMiddleWare>>\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a4ce99a6afd7423da41524e7ba9750c63}{m\_Middleware}}\ =\ [];}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00095}00095\ \ \ \ \ \mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestLogger}{ISimpleRestLogger}}\ m\_Logger;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00096}00096\ \ \ \ \ \mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestContentTypeParser}{ISimpleRestContentTypeParser}}\ m\_ResponseTypeParser;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00097}00097\ \ \ \ \ HttpListener\ m\_Listener;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00098}00098\ \ \ \ \ \textcolor{keywordtype}{int}\ m\_Port;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00099}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a8978188138c163fbbed67057a5ac1d5c}{00099}}\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a2d9c9e5a04fd9cfce4d1e26bc57ff77e}{SimpleRestApi}}(\textcolor{keywordtype}{int}\ port,\ \mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestLogger}{ISimpleRestLogger}}\ logger\ =\ \textcolor{keyword}{null},\ \mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestContentTypeParser}{ISimpleRestContentTypeParser}}\ responseParser\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00100}00100\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00101}00101\ \ \ \ \ \ \ \ \ m\_Logger\ ??=\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestLogger}{SimpleRestLogger}}()}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00102}00102\ \ \ \ \ \ \ \ \ m\_ResponseTypeParser\ ??=\ \textcolor{keyword}{new}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestContentTypeParser}{SimpleRestContentTypeParser}}();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00103}00103\ \ \ \ \ \ \ \ \ m\_Listener\ =\ \textcolor{keyword}{new}\ HttpListener();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00104}00104\ \ \ \ \ \ \ \ \ m\_Port\ =\ port;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00105}00105\ \ \ \ \ \ \ \ \ m\_Listener.Prefixes.Add(\textcolor{stringliteral}{"{}http://*:"{}}\ +\ port\ +\ \textcolor{stringliteral}{"{}/"{}});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00106}00106\ \ \ \ \ \ \ \ \ m\_Logger\ =\ logger;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00107}00107\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00108}00108\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00109}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a5b7974e06c30ac1d4174447ed728f09b}{00109}}\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00110}00110\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a8978188138c163fbbed67057a5ac1d5c}{Map}}(\textcolor{keywordtype}{string}\ endpoint,\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_afcd00c55c6e414b086cd86ac1d5eb299}{ApiMiddleWare}}\ middleware)}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00111}00111\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00112}00112\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a4ce99a6afd7423da41524e7ba9750c63}{m\_Middleware}}[endpoint]\ ==\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00113}00113\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00114}00114\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a4ce99a6afd7423da41524e7ba9750c63}{m\_Middleware}}[endpoint]\ =\ [];}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00115}00115\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00116}00116\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00117}00117\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a4ce99a6afd7423da41524e7ba9750c63}{m\_Middleware}}[endpoint].Add(middleware);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00119}00119\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00120}00120\ \ \ \ \ \textcolor{keyword}{public}\ async\ Task\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a5b7974e06c30ac1d4174447ed728f09b}{Start}}(Action<int>?\ OnStartup\ =\ \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00121}00121\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00122}00122\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00123}00123\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00124}00124\ \ \ \ \ \ \ \ \ \ \ \ \ m\_Listener.Start();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00125}00125\ \ \ \ \ \ \ \ \ \ \ \ \ OnStartup?.Invoke(m\_Port);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (\textcolor{keyword}{true})}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00127}00127\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00128}00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00129}00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00130}00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ HttpListenerContext\ context\ =\ await\ m\_Listener.GetContextAsync();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00131}00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SimpleRestRequest\ request\ =\ SimpleRestRequest.\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_adaaa2730f231589a60dd20dbe5f7a0b3}{FromHttpListenerContext}}(context);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ SimpleRestResponse\ response\ =\ \textcolor{keyword}{new}\ SimpleRestResponse();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{foreach}\ (\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_afcd00c55c6e414b086cd86ac1d5eb299}{ApiMiddleWare}}\ middleware\ \textcolor{keywordflow}{in}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a4ce99a6afd7423da41524e7ba9750c63}{m\_Middleware}}[request.Endpoint])}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ await\ Task.Run(()\ =>\ \{\ middleware.Invoke(request,\ response);\ \});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00137}00137\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_Logger.\mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestLogger_af81955907f4dbc014ebb3125b04577eb}{Log}}(request);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ context.Response.Close();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00141}00141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ e)}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00142}00142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00143}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_acf9f9bf0d074cc3eb1fd572ca8140c1e}{00143}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Console.WriteLine(\textcolor{stringliteral}{"{}Something\ went\ wrong\ while\ getting\ request:\ "{}}\ +\ e.Message\ +\ \textcolor{stringliteral}{"{}\ "{}}\ +\ e.StackTrace);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00144}00144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00145}00145\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00146}00146\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00147}00147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00148}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_aeaf8f0c78cfdfa37e868a0f91abc52a1}{00148}}\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}\ (Exception\ e)}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00149}00149\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00150}00150\ \ \ \ \ \ \ \ \ \ \ \ \ Console.WriteLine(\textcolor{stringliteral}{"{}Failure\ to\ open\ server:\ "{}}\ +\ e.Message);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00151}00151\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00152}00152\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00153}00153\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00154}\mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5b}{00154}}\ \ \ \ \ \textcolor{keyword}{public}\ async\ Task\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_acf9f9bf0d074cc3eb1fd572ca8140c1e}{RunMiddleWare}}(\textcolor{keywordtype}{string}\ endpoint,\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest}{SimpleRestRequest}}\ request,\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse}{SimpleRestResponse}}\ response)}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00155}00155\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00156}00156\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_a4ce99a6afd7423da41524e7ba9750c63}{m\_Middleware}}[endpoint].Dump();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00157}00157\ \ \ \ \ \ \ \ \ await\ Task.Delay(1);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00158}00158\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00159}00159\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestApi_aeaf8f0c78cfdfa37e868a0f91abc52a1}{Close}}()}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00160}00160\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00161}00161\ \ \ \ \ \ \ \ \ m\_Listener.Close();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00162}00162\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00163}00163\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00164}00164\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00165}00165\ \textcolor{keyword}{public}\ \textcolor{keyword}{enum}\ \mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5b}{SimpleRestMethod}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00166}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest}{00166}}\ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00167}00167\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5ba7528035a93ee69cedb1dbddb2f0bfcc8}{GET}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00168}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_a7fbc50eb208a7dc3a7ac38f417df941a}{00168}}\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5baa02439ec229d8be0e74b0c1602392310}{POST}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00169}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_ad45900d981727d4fa617fb0b48b6c8f2}{00169}}\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5bae15e216fc1c639f787b1231ecdfa1bf8}{HEAD}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00170}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_a78b2fba7bce3903102b0fa64579d898d}{00170}}\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5ba63bc9a3997d66d835d9f3ec29451407d}{PATCH}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00171}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_aecf7c61578e12f6a481e87a4e095d8f6}{00171}}\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5ba3e75383a5992a6d15fb81e872e46e256}{PUT}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00172}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_aba1acc61b1d711adb985aaa8322aaae9}{00172}}\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5ba32f68a60cef40faedbc6af20298c1a1e}{DELETE}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00173}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_ad75977a4cebe0f481443f1f9fd650277}{00173}}\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5ba164dd62adb30ca051b5289672a572f9b}{OPTIONS}},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00174}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_afe2b5729004de3d1246af96a2557337b}{00174}}\ \ \ \ \ \mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5ba03570470bad94692ce93e32700d2e1cb}{OTHER}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00175}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_a9c82f9d28c69046d273cc25fb08669c1}{00175}}\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00176}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_a8ea85f85f1048d467fa8c5ba6cdd25b7}{00176}}\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00177}00177\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest}{SimpleRestRequest}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00178}00178\ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00179}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_adaaa2730f231589a60dd20dbe5f7a0b3}{00179}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}?\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_a7fbc50eb208a7dc3a7ac38f417df941a}{Endpoint}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00180}00180\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{object}[]?\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_ad45900d981727d4fa617fb0b48b6c8f2}{Path}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00181}00181\ \ \ \ \ \textcolor{keyword}{public}\ Dictionary<string,\ object?>?\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_a78b2fba7bce3903102b0fa64579d898d}{Query}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00182}00182\ \ \ \ \ \textcolor{keyword}{public}\ Dictionary<string,\ object?>?\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_aecf7c61578e12f6a481e87a4e095d8f6}{Params}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00183}00183\ \ \ \ \ \textcolor{keyword}{public}\ SimpleRestRequestBody?\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_aba1acc61b1d711adb985aaa8322aaae9}{Body}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00184}00184\ \ \ \ \ \textcolor{keyword}{public}\ Dictionary<string,\ string>?\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_ad75977a4cebe0f481443f1f9fd650277}{Headers}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00185}00185\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}?\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_afe2b5729004de3d1246af96a2557337b}{ContentType}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00186}00186\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_a9c82f9d28c69046d273cc25fb08669c1}{ContentLength}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00187}00187\ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5b}{SimpleRestMethod}}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_a8ea85f85f1048d467fa8c5ba6cdd25b7}{Method}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00188}00188\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00189}00189\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00190}00190\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{static}\ SimpleRestRequest\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_adaaa2730f231589a60dd20dbe5f7a0b3}{FromHttpListenerContext}}(HttpListenerContext\ listener)}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00191}00191\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00192}00192\ \ \ \ \ \ \ \ \ HttpListenerRequest\ contextRequest\ =\ listener.Request;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00193}00193\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00194}00194\ \ \ \ \ \ \ \ \ SimpleRestRequest\ request\ =\ \textcolor{keyword}{new}\ SimpleRestRequest();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00195}00195\ \ \ \ \ \ \ \ \ request.Query\ =\ contextRequest.QueryString.AllKeys.ToDictionary(k\ =>\ k,\ k\ =>\ contextRequest.QueryString[k].SafeDeserialize(contextRequest.QueryString[k]));}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00196}00196\ \ \ \ \ \ \ \ \ request.Body\ =\ \textcolor{keyword}{new}\ SimpleRestRequestBody(contextRequest);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00197}00197\ \ \ \ \ \ \ \ \ request.Headers\ =\ contextRequest.Headers?.AllKeys.ToDictionary(k\ =>\ k,\ k\ =>\ contextRequest.Headers[k]);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00198}00198\ \ \ \ \ \ \ \ \ request.ContentType\ =\ contextRequest.ContentType;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00199}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody}{00199}}\ \ \ \ \ \ \ \ \ request.ContentLength\ =\ contextRequest.ContentLength64;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00200}00200\ \ \ \ \ \ \ \ \ request.Endpoint\ =\ contextRequest.Url?.AbsolutePath;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00201}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_a6ae6e22ce9df762072f40371285e2fce}{00201}}\ \ \ \ \ \ \ \ \ request.Method\ =\ Enum.Parse<\mbox{\hyperlink{namespaceSimpleRest_aa239f2865fc32168ffb20ecdfa340b5b}{SimpleRestMethod}}>(contextRequest.HttpMethod);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00202}00202\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ raw\ URL\ and\ extract\ the\ path}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00203}00203\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ rawUrl\ =\ contextRequest.RawUrl;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00204}00204\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}\ path\ =\ rawUrl.Split(\textcolor{charliteral}{'?'})[0];\ \textcolor{comment}{//\ Exclude\ any\ query\ string}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00205}00205\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{string}[]\ pathSegments\ =\ path.Split(\textcolor{keyword}{new}[]\ \{\ \textcolor{charliteral}{'/'}\ \},\ StringSplitOptions.RemoveEmptyEntries);\ \textcolor{comment}{//\ Split\ by\ slash}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00206}00206\ \ \ \ \ \ \ \ \ request.Path\ =\ pathSegments;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00207}00207\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00208}00208\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ request;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00209}00209\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00210}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_adce6320d6d2ae30973af7a8796ff0249}{00210}}\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody}{SimpleRestRequestBody}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00211}00211\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00212}00212\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_a6ae6e22ce9df762072f40371285e2fce}{SimpleRestRequestBody}}(HttpListenerRequest\ request)}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00213}00213\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00214}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_a2f7e061928f2d6de23d3d49328f7a27f}{00214}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using}\ (var\ memoryStream\ =\ \textcolor{keyword}{new}\ MemoryStream())}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00215}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_a0db6d85f31159c52d9a02591c5a08fb7}{00215}}\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00216}00216\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ request.InputStream.CopyTo(memoryStream);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00217}00217\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_a0db6d85f31159c52d9a02591c5a08fb7}{Bytes}}\ =\ memoryStream.ToArray();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00218}00218\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00219}00219\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_a2f7e061928f2d6de23d3d49328f7a27f}{Content}}\ =\ Encoding.UTF8.GetString(\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_a0db6d85f31159c52d9a02591c5a08fb7}{Bytes}});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00220}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse}{00220}}\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00221}00221\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ TBody\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_adce6320d6d2ae30973af7a8796ff0249}{GetContent<TBody>}}()}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00222}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse_a6629e66b81529aa4ac0f1849e575b3b0}{00222}}\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00223}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse_af4934e08776f0ddb1457fb7d5ec7b380}{00223}}\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ JsonConvert.DeserializeObject<TBody>(\mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_a2f7e061928f2d6de23d3d49328f7a27f}{Content}});}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00224}00224\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00225}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse_a9e37993049208196179e6563bbfd6973}{00225}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_a2f7e061928f2d6de23d3d49328f7a27f}{Content}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00226}00226\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{byte}[]\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestRequest_1_1SimpleRestRequestBody_a0db6d85f31159c52d9a02591c5a08fb7}{Bytes}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00228}00228\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00229}00229\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00230}00230\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00231}00231\ \textcolor{keyword}{class\ }SimpleRestResponse}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00232}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestContentTypeParser}{00232}}\ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00233}00233\ \ \ \ \ \textcolor{keyword}{public}\ HttpListenerResponse?\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse_a6629e66b81529aa4ac0f1849e575b3b0}{Response}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{private}\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00234}00234\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse_af4934e08776f0ddb1457fb7d5ec7b380}{ContentType}}\ \{\ \textcolor{keyword}{get};\ \textcolor{keyword}{set};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00235}00235\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00236}00236\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse_a9e37993049208196179e6563bbfd6973}{Send<T>}}(T\ result)}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00237}00237\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00238}00238\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{byte}[]\ buffer\ =\ Encoding.UTF8.GetBytes(JsonConvert.SerializeObject(result));}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00239}00239\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse_a6629e66b81529aa4ac0f1849e575b3b0}{Response}}?.OutputStream.Write(buffer,\ 0,\ buffer.Length);}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00240}00240\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestResponse_a6629e66b81529aa4ac0f1849e575b3b0}{Response}}?.Close();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00241}00241\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00242}00242\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00243}00243\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classSimpleRest_1_1SimpleRestContentTypeParser}{SimpleRestContentTypeParser}}\ :\ \mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestContentTypeParser}{ISimpleRestContentTypeParser}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00244}00244\ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00245}00245\ \ \ \ \ Dictionary<Type,\ string>\ contentTypes\ =\ \textcolor{keyword}{new}\ Dictionary<Type,\ string>}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00246}00246\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00247}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestContentTypeParser_a77bf3efbba65ecf930f4e6938693f7a6}{00247}}\ \ \ \ \ \ \ \ \ \{\ typeof(\textcolor{keywordtype}{string}),\ \textcolor{stringliteral}{"{}text/plain"{}}\ \},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00248}00248\ \ \ \ \ \ \ \ \ \{\ typeof(\textcolor{keywordtype}{int}),\ \textcolor{stringliteral}{"{}text/plain"{}}\ \},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00249}00249\ \ \ \ \ \ \ \ \ \{\ typeof(\textcolor{keywordtype}{float}),\ \textcolor{stringliteral}{"{}text/plain"{}}\ \},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00250}00250\ \ \ \ \ \ \ \ \ \{\ typeof(\textcolor{keywordtype}{double}),\ \textcolor{stringliteral}{"{}text/plain"{}}\ \},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00251}\mbox{\hyperlink{classSimpleRest_1_1SimpleRestContentTypeParser_aac5c24bcd91bc449e08a2d4f91e3cc4f}{00251}}\ \ \ \ \ \ \ \ \ \{\ typeof(decimal),\ \textcolor{stringliteral}{"{}text/plain"{}}\ \},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00252}00252\ \ \ \ \ \ \ \ \ \{\ typeof(\textcolor{keywordtype}{bool}),\ \textcolor{stringliteral}{"{}text/plain"{}}\ \},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00253}00253\ \ \ \ \ \ \ \ \ \{\ typeof(\textcolor{keywordtype}{byte}),\ \textcolor{stringliteral}{"{}application/octet-\/stream"{}}\ \},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00254}00254\ \ \ \ \ \ \ \ \ \{\ typeof(\textcolor{keywordtype}{byte}[]),\ \textcolor{stringliteral}{"{}application/octet-\/stream"{}}\ \},}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00255}00255\ \ \ \ \ \ \ \ \ \{\ typeof(DateTime),\ \textcolor{stringliteral}{"{}application/json"{}}\ \},\ \ \ \ \textcolor{comment}{//\ Serialize\ dates\ as\ JSON}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00256}00256\ \ \ \ \ \ \ \ \ \{\ typeof(Guid),\ \textcolor{stringliteral}{"{}application/json"{}}\ \},\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Serialize\ GUIDs\ as\ JSON}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00257}\mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestContentTypeParser}{00257}}\ \ \ \ \ \};}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00258}00258\ \ \ \ \ \textcolor{keyword}{public}\ Dictionary<Type,\ string>\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestContentTypeParser_a77bf3efbba65ecf930f4e6938693f7a6}{ContentTypes}}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00259}\mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestContentTypeParser_a9d0db09c3bba79669196952e660da5b1}{00259}}\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00260}\mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestContentTypeParser_a940ffaf1ce825366c9ede6c2cc82d5d5}{00260}}\ \ \ \ \ \ \ \ \ \textcolor{keyword}{get}\ =>\ contentTypes;}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00261}00261\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00262}00262\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{classSimpleRest_1_1SimpleRestContentTypeParser_aac5c24bcd91bc449e08a2d4f91e3cc4f}{GetType<T>}}()}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00263}00263\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00264}00264\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00265}00265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ contentTypes[typeof(T)];}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00266}00266\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00267}00267\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00268}00268\ \textcolor{keyword}{interface\ }ISimpleRestContentTypeParser}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00269}00269\ \{}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00270}00270\ \ \ \ \ Dictionary<Type,\ string>\ \mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestContentTypeParser_a9d0db09c3bba79669196952e660da5b1}{ContentTypes}}\ \{\ \textcolor{keyword}{get};\ \}}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00271}00271\ \ \ \ \ \textcolor{keyword}{public}\ \textcolor{keywordtype}{string}\ \mbox{\hyperlink{interfaceSimpleRest_1_1ISimpleRestContentTypeParser_a940ffaf1ce825366c9ede6c2cc82d5d5}{GetType<T>}}();}
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00272}00272\ }
\DoxyCodeLine{\Hypertarget{Program_8cs_source_l00273}00273\ \}}

\end{DoxyCode}
